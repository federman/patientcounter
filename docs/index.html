<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Counts Hospital Patients Quickly • patientcounter</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Counts Hospital Patients Quickly">
<meta property="og:description" content="Fast, flexible census of patient occupancy in multiple locations in 
    hospital setting.  Obtain net count of patients, accounting for
    those admitted before and not yet discharged. 
    Typically, this requires a database and knowledge of SQL. 
    This package allows anyone who has time in, time out, unique identifiers, 
    and an optional grouping variable, to accurately determine how many patients 
    were occupying beds, at any time of day and granularity.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">patientcounter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnmackintosh/patientcounter/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="patientcounter-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#patientcounter-" class="anchor"></a>patientcounter <img src="reference/figures/logo.png" width="160px" align="right">
</h1></div>

<p><a href="https://travis-ci.com/johnmackintosh/patientcounter"><img src="https://travis-ci.com/johnmackintosh/patientcounter.svg?branch=master" alt="Build Status"></a></p>
<p><a href="https://ci.appveyor.com/project/johnmackintosh/patientcounter"><img src="https://ci.appveyor.com/api/projects/status/github/johnmackintosh/patientcounter?branch=master&amp;svg=true" alt="AppVeyor build status"></a></p>
<p><a href="https://codecov.io/gh/johnmackintosh/patientcounter"><img src="https://codecov.io/gh/johnmackintosh/patientcounter/branch/master/graph/badge.svg" alt="codecov"></a></p>
<p><a href="https://github.com/johnmackintosh/patientcounter"><img src="https://img.shields.io/badge/devel%20version-0.1.0-blue.svg"></a></p>
<p><a href="https://github.com/johnmackintosh/patientcounter/commits/master"><img src="https://img.shields.io/github/last-commit/johnmackintosh/patientcounter.svg"></a> <!-- badges: end --></p>
<p>How many patients were in the hospital at 10 AM yesterday?<br>
How many were in during each 15 minute spell between 2pm and 6pm?<br>
How many were in during the last week, by hour?</p>
<p>This package aims to make answering these questions easier and quicker.</p>
<p>No SQL? No problem!</p>
<p>If you have time in, time out, a unique patient identifier, and optionally, a grouping variable to track moves between departments, this package will tell you how many patients were ‘IN’ at any time, at whatever granularity you need.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>patientcounter is not on <a href="https://CRAN.R-project.org">CRAN</a> yet, so install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages("remotes") # if not already installed</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"johnmackintosh/patientcounter"</span>)</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Obtain data for each individual patient, by hour, for each hour of their stay.<br>
Note we are restricting the outputs to keep this readable</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">patientcounter</span>)
<span class="no">patient_count</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/interval_census.html">interval_census</a></span>(<span class="no">beds</span>,
<span class="kw">identifier</span> <span class="kw">=</span> <span class="st">'patient'</span>,
<span class="kw">admit</span> <span class="kw">=</span> <span class="st">'start_time'</span>,
<span class="kw">discharge</span> <span class="kw">=</span> <span class="st">'end_time'</span>,
<span class="kw">group_var</span> <span class="kw">=</span> <span class="st">'bed'</span>,
<span class="kw">time_unit</span> <span class="kw">=</span> <span class="st">'1 hour'</span>,
<span class="kw">results</span> <span class="kw">=</span> <span class="st">"patient"</span>,
<span class="kw">uniques</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">patient_count</span>)
<span class="co">#&gt;    bed patient          start_time            end_time  interval_beginning</span>
<span class="co">#&gt; 1:   A       1 2020-01-01 09:34:00 2020-01-01 10:34:00 2020-01-01 09:00:00</span>
<span class="co">#&gt; 2:   B       5 2020-01-01 09:45:00 2020-01-01 14:45:00 2020-01-01 09:00:00</span>
<span class="co">#&gt; 3:   A       1 2020-01-01 09:34:00 2020-01-01 10:34:00 2020-01-01 10:00:00</span>
<span class="co">#&gt; 4:   B       5 2020-01-01 09:45:00 2020-01-01 14:45:00 2020-01-01 10:00:00</span>
<span class="co">#&gt; 5:   C       9 2020-01-01 10:05:00 2020-01-01 10:35:00 2020-01-01 10:00:00</span>
<span class="co">#&gt; 6:   A       2 2020-01-01 10:55:00 2020-01-01 11:15:24 2020-01-01 10:00:00</span>
<span class="co">#&gt;           interval_end  base_date base_hour</span>
<span class="co">#&gt; 1: 2020-01-01 10:00:00 2020-01-01         9</span>
<span class="co">#&gt; 2: 2020-01-01 10:00:00 2020-01-01         9</span>
<span class="co">#&gt; 3: 2020-01-01 11:00:00 2020-01-01        10</span>
<span class="co">#&gt; 4: 2020-01-01 11:00:00 2020-01-01        10</span>
<span class="co">#&gt; 5: 2020-01-01 11:00:00 2020-01-01        10</span>
<span class="co">#&gt; 6: 2020-01-01 11:00:00 2020-01-01        10</span></pre></div>
<p>To obtain summary data for every hour, for all combined patient stays:</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">patientcounter</span>)
<span class="no">patient_count_hour</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/interval_census.html">interval_census</a></span>(<span class="no">beds</span>,
<span class="kw">identifier</span> <span class="kw">=</span> <span class="st">'patient'</span>,
<span class="kw">admit</span> <span class="kw">=</span> <span class="st">'start_time'</span>,
<span class="kw">discharge</span> <span class="kw">=</span> <span class="st">'end_time'</span>,
<span class="kw">group_var</span> <span class="kw">=</span> <span class="st">'bed'</span>,
<span class="kw">time_unit</span> <span class="kw">=</span> <span class="st">'1 hour'</span>,
<span class="kw">results</span> <span class="kw">=</span> <span class="st">"total"</span>,
<span class="kw">uniques</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">patient_count_hour</span>)
<span class="co">#&gt;     interval_beginning        interval_end  base_date base_hour N</span>
<span class="co">#&gt; 1: 2020-01-01 09:00:00 2020-01-01 10:00:00 2020-01-01         9 2</span>
<span class="co">#&gt; 2: 2020-01-01 10:00:00 2020-01-01 11:00:00 2020-01-01        10 5</span>
<span class="co">#&gt; 3: 2020-01-01 11:00:00 2020-01-01 12:00:00 2020-01-01        11 4</span>
<span class="co">#&gt; 4: 2020-01-01 12:00:00 2020-01-01 13:00:00 2020-01-01        12 3</span>
<span class="co">#&gt; 5: 2020-01-01 13:00:00 2020-01-01 14:00:00 2020-01-01        13 3</span>
<span class="co">#&gt; 6: 2020-01-01 14:00:00 2020-01-01 15:00:00 2020-01-01        14 3</span></pre></div>
<p>Note that you also receive the base date and base hour for each interval to enable easier filtering of the results.</p>
</div>
<div id="general-help" class="section level2">
<h2 class="hasAnchor">
<a href="#general-help" class="anchor"></a>General Help</h2>
<ul>
<li>You must ‘quote’ your variables, for the time being at least..</li>
</ul>
</div>
<div id="results" class="section level2">
<h2 class="hasAnchor">
<a href="#results" class="anchor"></a>Results</h2>
<ul>
<li>Set results to ‘patient’ for 1 row per patient per interval for each interval in the patient stay.</li>
<li>Set results to ‘group’ to get a count per group per interval.<br>
Remember this will also be influenced by the ‘uniques’ argument.<br>
</li>
<li>Set results to ‘total’ for a summary of the data set - interval, base_hour and count.</li>
</ul>
</div>
<div id="uniques" class="section level2">
<h2 class="hasAnchor">
<a href="#uniques" class="anchor"></a>Uniques</h2>
<ul>
<li>To count patients, leave ‘uniques’ at the default value of ‘TRUE’.<br>
</li>
<li>To count patient moves between locations during intervals, set uniques to ‘FALSE’. This will ensure patients who occupy beds in different locations during each interval are accounted for.</li>
</ul>
</div>
<div id="timezones" class="section level2">
<h2 class="hasAnchor">
<a href="#timezones" class="anchor"></a>Timezones</h2>
<ul>
<li>Everything is easier if you use “UTC” by default. You can attempt to coerce the final results yourself using lubridate::force_tz()</li>
</ul>
<p>To find your system timezone:</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/timezones.html">Sys.timezone</a></span>()</pre></div>
</div>
<div id="time-unit" class="section level2">
<h2 class="hasAnchor">
<a href="#time-unit" class="anchor"></a>Time Unit</h2>
<p>See ? seq.POSIXt for valid values</p>
<p>E.G. ‘1 hour’, ‘15 mins’, ‘30 mins’</p>
</div>
<div id="time-adjust" class="section level2">
<h2 class="hasAnchor">
<a href="#time-adjust" class="anchor"></a>Time Adjust</h2>
<p>Want to count those in between 10:01 to 11:00? You can do that using ‘time_adjust_period’ - set it to ‘start_min’ and then set ‘time_adjust_interval’ to 1.</p>
<p>10:00 to 10:59?<br>
Yes, that’s possible as well - set ‘time_adjust_period’ to ‘end_min’ and set ‘time_adjust_interval’ as before. You can set these periods to any value, as long as it makes sense in relation to your chosen time_unit.</p>
<p>Here we adjust the start_time by 5 minutes</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">patientcounter</span>)
<span class="no">patient_count_time_adjust</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/interval_census.html">interval_census</a></span>(<span class="no">beds</span>,
<span class="kw">identifier</span> <span class="kw">=</span> <span class="st">'patient'</span>,
<span class="kw">admit</span> <span class="kw">=</span> <span class="st">'start_time'</span>,
<span class="kw">discharge</span> <span class="kw">=</span> <span class="st">'end_time'</span>,
<span class="kw">group_var</span> <span class="kw">=</span> <span class="st">'bed'</span>,
<span class="kw">time_unit</span> <span class="kw">=</span> <span class="st">'1 hour'</span>,
<span class="kw">time_adjust_period</span> <span class="kw">=</span> <span class="st">'start_min'</span>,
<span class="kw">time_adjust_value</span> <span class="kw">=</span> <span class="fl">5</span>,
<span class="kw">results</span> <span class="kw">=</span> <span class="st">"total"</span>,
<span class="kw">uniques</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">patient_count_time_adjust</span>)
<span class="co">#&gt;     interval_beginning        interval_end  base_date base_hour N</span>
<span class="co">#&gt; 1: 2020-01-01 09:05:00 2020-01-01 10:00:00 2020-01-01         9 2</span>
<span class="co">#&gt; 2: 2020-01-01 10:05:00 2020-01-01 11:00:00 2020-01-01        10 5</span>
<span class="co">#&gt; 3: 2020-01-01 11:05:00 2020-01-01 12:00:00 2020-01-01        11 4</span>
<span class="co">#&gt; 4: 2020-01-01 12:05:00 2020-01-01 13:00:00 2020-01-01        12 3</span>
<span class="co">#&gt; 5: 2020-01-01 13:05:00 2020-01-01 14:00:00 2020-01-01        13 3</span>
<span class="co">#&gt; 6: 2020-01-01 14:05:00 2020-01-01 15:00:00 2020-01-01        14 3</span></pre></div>
<p>Valid values for time_adjust_period are ‘start_min’, ‘start_sec’, ‘end_min’ and ‘end_sec’</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/johnmackintosh/patientcounter/">https://​github.com/​johnmackintosh/​patientcounter/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/johnmackintosh/patientcounter/issues">https://​github.com/​johnmackintosh/​patientcounter/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>John MacKintosh <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by John MacKintosh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
